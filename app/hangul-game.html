<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>í•œê¸€ ë°°ìš°ê¸° ê²Œì„ ğŸ®</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&family=Dongle:wght@700&display=swap" rel="stylesheet">
  <style>
    * {
      -webkit-tap-highlight-color: transparent;
      user-select: none;
    }
    
    body {
      margin: 0;
      padding: 0;
      font-family: 'Noto Sans KR', sans-serif;
      overflow: hidden;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .dongle-font {
      font-family: 'Dongle', sans-serif;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    @keyframes bounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    @keyframes fall {
      from { 
        transform: translateY(-100px);
        opacity: 0;
      }
      to { 
        transform: translateY(var(--fall-distance));
        opacity: 1;
      }
    }

    @keyframes celebrate {
      0% { transform: scale(1) rotate(0deg); }
      25% { transform: scale(1.2) rotate(-10deg); }
      50% { transform: scale(1.3) rotate(10deg); }
      75% { transform: scale(1.2) rotate(-5deg); }
      100% { transform: scale(1) rotate(0deg); }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }

    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }

    .falling-letter {
      animation: fall linear forwards;
    }

    .celebrate {
      animation: celebrate 0.6s ease-in-out;
    }

    .shake {
      animation: shake 0.3s ease-in-out;
    }

    .sparkle {
      animation: sparkle 1s ease-in-out;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // 200ê°œ ë‹¨ì–´ ë°ì´í„°ë² ì´ìŠ¤
    const wordDatabase = [
      // ë™ë¬¼ (40ê°œ)
      { word: 'ê°•ì•„ì§€', emoji: 'ğŸ•', category: 'ë™ë¬¼' },
      { word: 'ê³ ì–‘ì´', emoji: 'ğŸ±', category: 'ë™ë¬¼' },
      { word: 'í† ë¼', emoji: 'ğŸ°', category: 'ë™ë¬¼' },
      { word: 'ê³°', emoji: 'ğŸ»', category: 'ë™ë¬¼' },
      { word: 'ì—¬ìš°', emoji: 'ğŸ¦Š', category: 'ë™ë¬¼' },
      { word: 'ì‚¬ì', emoji: 'ğŸ¦', category: 'ë™ë¬¼' },
      { word: 'í˜¸ë‘ì´', emoji: 'ğŸ¯', category: 'ë™ë¬¼' },
      { word: 'ì½”ë¼ë¦¬', emoji: 'ğŸ˜', category: 'ë™ë¬¼' },
      { word: 'ê¸°ë¦°', emoji: 'ğŸ¦’', category: 'ë™ë¬¼' },
      { word: 'ì–¼ë£©ë§', emoji: 'ğŸ¦“', category: 'ë™ë¬¼' },
      { word: 'íŒë‹¤', emoji: 'ğŸ¼', category: 'ë™ë¬¼' },
      { word: 'ë¼ì§€', emoji: 'ğŸ·', category: 'ë™ë¬¼' },
      { word: 'ì†Œ', emoji: 'ğŸ®', category: 'ë™ë¬¼' },
      { word: 'ë§', emoji: 'ğŸ´', category: 'ë™ë¬¼' },
      { word: 'ì–‘', emoji: 'ğŸ‘', category: 'ë™ë¬¼' },
      { word: 'ì›ìˆ­ì´', emoji: 'ğŸµ', category: 'ë™ë¬¼' },
      { word: 'ë‹­', emoji: 'ğŸ”', category: 'ë™ë¬¼' },
      { word: 'ì˜¤ë¦¬', emoji: 'ğŸ¦†', category: 'ë™ë¬¼' },
      { word: 'í­ê·„', emoji: 'ğŸ§', category: 'ë™ë¬¼' },
      { word: 'ë¬¼ê³ ê¸°', emoji: 'ğŸŸ', category: 'ë™ë¬¼' },
      { word: 'ê³ ë˜', emoji: 'ğŸ‹', category: 'ë™ë¬¼' },
      { word: 'ìƒì–´', emoji: 'ğŸ¦ˆ', category: 'ë™ë¬¼' },
      { word: 'ë¬¸ì–´', emoji: 'ğŸ™', category: 'ë™ë¬¼' },
      { word: 'ê²Œ', emoji: 'ğŸ¦€', category: 'ë™ë¬¼' },
      { word: 'ìƒˆìš°', emoji: 'ğŸ¦', category: 'ë™ë¬¼' },
      { word: 'ê±°ë¶ì´', emoji: 'ğŸ¢', category: 'ë™ë¬¼' },
      { word: 'ë±€', emoji: 'ğŸ', category: 'ë™ë¬¼' },
      { word: 'ì•…ì–´', emoji: 'ğŸŠ', category: 'ë™ë¬¼' },
      { word: 'ê°œêµ¬ë¦¬', emoji: 'ğŸ¸', category: 'ë™ë¬¼' },
      { word: 'ë‹¤ëŒì¥', emoji: 'ğŸ¿ï¸', category: 'ë™ë¬¼' },
      { word: 'ì¥', emoji: 'ğŸ­', category: 'ë™ë¬¼' },
      { word: 'í–„ìŠ¤í„°', emoji: 'ğŸ¹', category: 'ë™ë¬¼' },
      { word: 'ìƒˆ', emoji: 'ğŸ¦', category: 'ë™ë¬¼' },
      { word: 'ë…ìˆ˜ë¦¬', emoji: 'ğŸ¦…', category: 'ë™ë¬¼' },
      { word: 'ì˜¬ë¹¼ë¯¸', emoji: 'ğŸ¦‰', category: 'ë™ë¬¼' },
      { word: 'ê³µë£¡', emoji: 'ğŸ¦•', category: 'ë™ë¬¼' },
      { word: 'ì‚¬ìŠ´', emoji: 'ğŸ¦Œ', category: 'ë™ë¬¼' },
      { word: 'ë‚™íƒ€', emoji: 'ğŸª', category: 'ë™ë¬¼' },
      { word: 'ìº¥ê±°ë£¨', emoji: 'ğŸ¦˜', category: 'ë™ë¬¼' },
      { word: 'ì½”ì•Œë¼', emoji: 'ğŸ¨', category: 'ë™ë¬¼' },

      // ê³¤ì¶© (20ê°œ)
      { word: 'ë‚˜ë¹„', emoji: 'ğŸ¦‹', category: 'ê³¤ì¶©' },
      { word: 'ë²Œ', emoji: 'ğŸ', category: 'ê³¤ì¶©' },
      { word: 'ê°œë¯¸', emoji: 'ğŸœ', category: 'ê³¤ì¶©' },
      { word: 'ë¬´ë‹¹ë²Œë ˆ', emoji: 'ğŸ', category: 'ê³¤ì¶©' },
      { word: 'ê±°ë¯¸', emoji: 'ğŸ•·ï¸', category: 'ê³¤ì¶©' },
      { word: 'íŒŒë¦¬', emoji: 'ğŸª°', category: 'ê³¤ì¶©' },
      { word: 'ëª¨ê¸°', emoji: 'ğŸ¦Ÿ', category: 'ê³¤ì¶©' },
      { word: 'ì ìë¦¬', emoji: 'ğŸª°', category: 'ê³¤ì¶©' },
      { word: 'ë©”ëšœê¸°', emoji: 'ğŸ¦—', category: 'ê³¤ì¶©' },
      { word: 'ë§¤ë¯¸', emoji: 'ğŸ¦—', category: 'ê³¤ì¶©' },
      { word: 'ê·€ëšœë¼ë¯¸', emoji: 'ğŸ¦—', category: 'ê³¤ì¶©' },
      { word: 'ì‚¬ë§ˆê·€', emoji: 'ğŸ¦—', category: 'ê³¤ì¶©' },
      { word: 'ë‹¬íŒ½ì´', emoji: 'ğŸŒ', category: 'ê³¤ì¶©' },
      { word: 'ì§€ë ì´', emoji: 'ğŸª±', category: 'ê³¤ì¶©' },
      { word: 'ì• ë²Œë ˆ', emoji: 'ğŸ›', category: 'ê³¤ì¶©' },
      { word: 'ì „ê°ˆ', emoji: 'ğŸ¦‚', category: 'ê³¤ì¶©' },
      { word: 'ë²Œë ˆ', emoji: 'ğŸ›', category: 'ê³¤ì¶©' },
      { word: 'ë”±ì •ë²Œë ˆ', emoji: 'ğŸª²', category: 'ê³¤ì¶©' },
      { word: 'í’ë…ì´', emoji: 'ğŸª²', category: 'ê³¤ì¶©' },
      { word: 'ì¥ìˆ˜í’ë…ì´', emoji: 'ğŸª²', category: 'ê³¤ì¶©' },

      // ê³¼ì¼ (25ê°œ)
      { word: 'ì‚¬ê³¼', emoji: 'ğŸ', category: 'ê³¼ì¼' },
      { word: 'ë°”ë‚˜ë‚˜', emoji: 'ğŸŒ', category: 'ê³¼ì¼' },
      { word: 'í¬ë„', emoji: 'ğŸ‡', category: 'ê³¼ì¼' },
      { word: 'ë”¸ê¸°', emoji: 'ğŸ“', category: 'ê³¼ì¼' },
      { word: 'ìˆ˜ë°•', emoji: 'ğŸ‰', category: 'ê³¼ì¼' },
      { word: 'ì°¸ì™¸', emoji: 'ğŸˆ', category: 'ê³¼ì¼' },
      { word: 'ë³µìˆ­ì•„', emoji: 'ğŸ‘', category: 'ê³¼ì¼' },
      { word: 'ë°°', emoji: 'ğŸ', category: 'ê³¼ì¼' },
      { word: 'ê°', emoji: 'ğŸŠ', category: 'ê³¼ì¼' },
      { word: 'ê·¤', emoji: 'ğŸŠ', category: 'ê³¼ì¼' },
      { word: 'ë ˆëª¬', emoji: 'ğŸ‹', category: 'ê³¼ì¼' },
      { word: 'ì˜¤ë Œì§€', emoji: 'ğŸŠ', category: 'ê³¼ì¼' },
      { word: 'ì²´ë¦¬', emoji: 'ğŸ’', category: 'ê³¼ì¼' },
      { word: 'ìë‘', emoji: 'ğŸ‘', category: 'ê³¼ì¼' },
      { word: 'ì‚´êµ¬', emoji: 'ğŸ‘', category: 'ê³¼ì¼' },
      { word: 'í‚¤ìœ„', emoji: 'ğŸ¥', category: 'ê³¼ì¼' },
      { word: 'íŒŒì¸ì• í”Œ', emoji: 'ğŸ', category: 'ê³¼ì¼' },
      { word: 'ë§ê³ ', emoji: 'ğŸ¥­', category: 'ê³¼ì¼' },
      { word: 'ì•„ë³´ì¹´ë„', emoji: 'ğŸ¥‘', category: 'ê³¼ì¼' },
      { word: 'ì½”ì½”ë„›', emoji: 'ğŸ¥¥', category: 'ê³¼ì¼' },
      { word: 'ë¸”ë£¨ë² ë¦¬', emoji: 'ğŸ«', category: 'ê³¼ì¼' },
      { word: 'í† ë§ˆí† ', emoji: 'ğŸ…', category: 'ê³¼ì¼' },
      { word: 'ë§¤ì‹¤', emoji: 'ğŸ‘', category: 'ê³¼ì¼' },
      { word: 'ì„ë¥˜', emoji: 'ğŸ', category: 'ê³¼ì¼' },
      { word: 'ìš©ê³¼', emoji: 'ğŸ‰', category: 'ê³¼ì¼' },

      // ì±„ì†Œ (20ê°œ)
      { word: 'ë‹¹ê·¼', emoji: 'ğŸ¥•', category: 'ì±„ì†Œ' },
      { word: 'ê°ì', emoji: 'ğŸ¥”', category: 'ì±„ì†Œ' },
      { word: 'ê³ êµ¬ë§ˆ', emoji: 'ğŸ ', category: 'ì±„ì†Œ' },
      { word: 'ì–‘íŒŒ', emoji: 'ğŸ§…', category: 'ì±„ì†Œ' },
      { word: 'ë§ˆëŠ˜', emoji: 'ğŸ§„', category: 'ì±„ì†Œ' },
      { word: 'ë°°ì¶”', emoji: 'ğŸ¥¬', category: 'ì±„ì†Œ' },
      { word: 'ì–‘ë°°ì¶”', emoji: 'ğŸ¥¬', category: 'ì±„ì†Œ' },
      { word: 'ë¸Œë¡œì½œë¦¬', emoji: 'ğŸ¥¦', category: 'ì±„ì†Œ' },
      { word: 'ìƒì¶”', emoji: 'ğŸ¥¬', category: 'ì±„ì†Œ' },
      { word: 'ì‹œê¸ˆì¹˜', emoji: 'ğŸ¥¬', category: 'ì±„ì†Œ' },
      { word: 'ì˜¤ì´', emoji: 'ğŸ¥’', category: 'ì±„ì†Œ' },
      { word: 'í˜¸ë°•', emoji: 'ğŸƒ', category: 'ì±„ì†Œ' },
      { word: 'ê°€ì§€', emoji: 'ğŸ†', category: 'ì±„ì†Œ' },
      { word: 'í”¼ë§', emoji: 'ğŸ«‘', category: 'ì±„ì†Œ' },
      { word: 'ê³ ì¶”', emoji: 'ğŸŒ¶ï¸', category: 'ì±„ì†Œ' },
      { word: 'ì˜¥ìˆ˜ìˆ˜', emoji: 'ğŸŒ½', category: 'ì±„ì†Œ' },
      { word: 'ë²„ì„¯', emoji: 'ğŸ„', category: 'ì±„ì†Œ' },
      { word: 'ì½©', emoji: 'ğŸ«˜', category: 'ì±„ì†Œ' },
      { word: 'ë¬´', emoji: 'ğŸ¥•', category: 'ì±„ì†Œ' },
      { word: 'íŒŒ', emoji: 'ğŸ§…', category: 'ì±„ì†Œ' },

      // ìŒì‹ (25ê°œ)
      { word: 'ë°¥', emoji: 'ğŸš', category: 'ìŒì‹' },
      { word: 'ë¹µ', emoji: 'ğŸ', category: 'ìŒì‹' },
      { word: 'ë–¡', emoji: 'ğŸ¡', category: 'ìŒì‹' },
      { word: 'ê¹€ë°¥', emoji: 'ğŸ™', category: 'ìŒì‹' },
      { word: 'ë¼ë©´', emoji: 'ğŸœ', category: 'ìŒì‹' },
      { word: 'êµ­ìˆ˜', emoji: 'ğŸ', category: 'ìŒì‹' },
      { word: 'í”¼ì', emoji: 'ğŸ•', category: 'ìŒì‹' },
      { word: 'í–„ë²„ê±°', emoji: 'ğŸ”', category: 'ìŒì‹' },
      { word: 'ì¹˜í‚¨', emoji: 'ğŸ—', category: 'ìŒì‹' },
      { word: 'ìƒŒë“œìœ„ì¹˜', emoji: 'ğŸ¥ª', category: 'ìŒì‹' },
      { word: 'í•«ë„ê·¸', emoji: 'ğŸŒ­', category: 'ìŒì‹' },
      { word: 'íƒ€ì½”', emoji: 'ğŸŒ®', category: 'ìŒì‹' },
      { word: 'ìŠ¤íŒŒê²Œí‹°', emoji: 'ğŸ', category: 'ìŒì‹' },
      { word: 'ì¹´ë ˆ', emoji: 'ğŸ›', category: 'ìŒì‹' },
      { word: 'ê¹€ì¹˜', emoji: 'ğŸ¥¬', category: 'ìŒì‹' },
      { word: 'ê³„ë€', emoji: 'ğŸ¥š', category: 'ìŒì‹' },
      { word: 'ìš°ìœ ', emoji: 'ğŸ¥›', category: 'ìŒì‹' },
      { word: 'ì£¼ìŠ¤', emoji: 'ğŸ§ƒ', category: 'ìŒì‹' },
      { word: 'ì•„ì´ìŠ¤í¬ë¦¼', emoji: 'ğŸ¦', category: 'ìŒì‹' },
      { word: 'ì¼€ì´í¬', emoji: 'ğŸ°', category: 'ìŒì‹' },
      { word: 'ì¿ í‚¤', emoji: 'ğŸª', category: 'ìŒì‹' },
      { word: 'ì‚¬íƒ•', emoji: 'ğŸ¬', category: 'ìŒì‹' },
      { word: 'ì´ˆì½œë¦¿', emoji: 'ğŸ«', category: 'ìŒì‹' },
      { word: 'ë„ë„›', emoji: 'ğŸ©', category: 'ìŒì‹' },
      { word: 'íŒì½˜', emoji: 'ğŸ¿', category: 'ìŒì‹' },

      // ìƒí™œìš©í’ˆ (30ê°œ)
      { word: 'ì˜ì', emoji: 'ğŸª‘', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ì±…ìƒ', emoji: 'ğŸª‘', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ì¹¨ëŒ€', emoji: 'ğŸ›ï¸', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ì†ŒíŒŒ', emoji: 'ğŸ›‹ï¸', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ëƒ‰ì¥ê³ ', emoji: 'ğŸ§Š', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ì„¸íƒê¸°', emoji: 'ğŸ§º', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'í…”ë ˆë¹„ì „', emoji: 'ğŸ“º', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ì „í™”ê¸°', emoji: 'ğŸ“', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ì»´í“¨í„°', emoji: 'ğŸ’»', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ì‹œê³„', emoji: 'â°', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ê±°ìš¸', emoji: 'ğŸª', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ë¹—', emoji: 'ğŸª®', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ì¹«ì†”', emoji: 'ğŸª¥', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ìˆ˜ê±´', emoji: 'ğŸ§´', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ë¹„ëˆ„', emoji: 'ğŸ§¼', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'íœ´ì§€', emoji: 'ğŸ§»', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ìš°ì‚°', emoji: 'â˜‚ï¸', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ê°€ë°©', emoji: 'ğŸ’', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ëª¨ì', emoji: 'ğŸ©', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ì•ˆê²½', emoji: 'ğŸ‘“', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ì‹ ë°œ', emoji: 'ğŸ‘Ÿ', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ì–‘ë§', emoji: 'ğŸ§¦', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ì¥ê°‘', emoji: 'ğŸ§¤', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ì±…', emoji: 'ğŸ“–', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ì—°í•„', emoji: 'âœï¸', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ì§€ìš°ê°œ', emoji: 'ğŸ§½', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ê°€ìœ„', emoji: 'âœ‚ï¸', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'í’€', emoji: 'ğŸ§´', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ê³µ', emoji: 'âš½', category: 'ìƒí™œìš©í’ˆ' },
      { word: 'ì¸í˜•', emoji: 'ğŸ§¸', category: 'ìƒí™œìš©í’ˆ' },

      // ìì—°/ê¸°íƒ€ (20ê°œ)
      { word: 'í•´', emoji: 'â˜€ï¸', category: 'ìì—°' },
      { word: 'ë‹¬', emoji: 'ğŸŒ™', category: 'ìì—°' },
      { word: 'ë³„', emoji: 'â­', category: 'ìì—°' },
      { word: 'êµ¬ë¦„', emoji: 'â˜ï¸', category: 'ìì—°' },
      { word: 'ë¹„', emoji: 'ğŸŒ§ï¸', category: 'ìì—°' },
      { word: 'ëˆˆ', emoji: 'â„ï¸', category: 'ìì—°' },
      { word: 'ë°”ëŒ', emoji: 'ğŸ’¨', category: 'ìì—°' },
      { word: 'ë²ˆê°œ', emoji: 'âš¡', category: 'ìì—°' },
      { word: 'ë¬´ì§€ê°œ', emoji: 'ğŸŒˆ', category: 'ìì—°' },
      { word: 'ê½ƒ', emoji: 'ğŸŒ¸', category: 'ìì—°' },
      { word: 'ë‚˜ë¬´', emoji: 'ğŸŒ³', category: 'ìì—°' },
      { word: 'í’€', emoji: 'ğŸŒ¿', category: 'ìì—°' },
      { word: 'ë°”ë‹¤', emoji: 'ğŸŒŠ', category: 'ìì—°' },
      { word: 'ì‚°', emoji: 'â›°ï¸', category: 'ìì—°' },
      { word: 'ê°•', emoji: 'ğŸŒŠ', category: 'ìì—°' },
      { word: 'ë¶ˆ', emoji: 'ğŸ”¥', category: 'ìì—°' },
      { word: 'ë¬¼', emoji: 'ğŸ’§', category: 'ìì—°' },
      { word: 'í™', emoji: 'ğŸŒ', category: 'ìì—°' },
      { word: 'ëŒ', emoji: 'ğŸª¨', category: 'ìì—°' },
      { word: 'ëª¨ë˜', emoji: 'ğŸ–ï¸', category: 'ìì—°' },
    ];

    // í•œê¸€ ìëª¨ìŒ ë¶„ë¦¬ í•¨ìˆ˜
    const getHangulLetters = (word) => {
      return word.split('');
    };

    // ëœë¤ ì˜¤ë‹µ ê¸€ì ìƒì„±
    const getRandomWrongLetters = (correctLetters, count = 6) => {
      const allLetters = ['ã„±', 'ã„´', 'ã„·', 'ã„¹', 'ã…', 'ã…‚', 'ã……', 'ã…‡', 'ã…ˆ', 'ã…Š', 'ã…‹', 'ã…Œ', 'ã…', 'ã…',
                         'ê°€', 'ë‚˜', 'ë‹¤', 'ë¼', 'ë§ˆ', 'ë°”', 'ì‚¬', 'ì•„', 'ì', 'ì°¨', 'ì¹´', 'íƒ€', 'íŒŒ', 'í•˜',
                         'ê°œ', 'ë‚´', 'ëŒ€', 'ë˜', 'ë§¤', 'ë°°', 'ìƒˆ', 'ì• ', 'ì¬', 'ì±„', 'ìº', 'íƒœ', 'íŒ¨', 'í•´',
                         'ê³ ', 'ë…¸', 'ë„', 'ë¡œ', 'ëª¨', 'ë³´', 'ì†Œ', 'ì˜¤', 'ì¡°', 'ì´ˆ', 'ì½”', 'í† ', 'í¬', 'í˜¸',
                         'êµ¬', 'ëˆ„', 'ë‘', 'ë£¨', 'ë¬´', 'ë¶€', 'ìˆ˜', 'ìš°', 'ì£¼', 'ì¶”', 'ì¿ ', 'íˆ¬', 'í‘¸', 'í›„',
                         'ê¸°', 'ë‹ˆ', 'ë””', 'ë¦¬', 'ë¯¸', 'ë¹„', 'ì‹œ', 'ì´', 'ì§€', 'ì¹˜', 'í‚¤', 'í‹°', 'í”¼', 'íˆ'];
      
      const wrongLetters = [];
      const usedLetters = new Set(correctLetters);
      
      while (wrongLetters.length < count) {
        const randomLetter = allLetters[Math.floor(Math.random() * allLetters.length)];
        if (!usedLetters.has(randomLetter)) {
          wrongLetters.push(randomLetter);
          usedLetters.add(randomLetter);
        }
      }
      
      return wrongLetters;
    };

    // ë©”ì¸ ê²Œì„ ì»´í¬ë„ŒíŠ¸
    function HangulGame() {
      const [gameState, setGameState] = useState('start'); // start, selectPlayer, playing, success, failed
      const [currentWord, setCurrentWord] = useState(null);
      const [fallingLetters, setFallingLetters] = useState([]);
      const [selectedLetters, setSelectedLetters] = useState([]);
      const [score, setScore] = useState(0);
      const [speed, setSpeed] = useState('medium'); // slow, medium, fast
      const [selectedPlayer, setSelectedPlayer] = useState(null);
      const gameAreaRef = useRef(null);

      // í”Œë ˆì´ì–´ ë°ì´í„° (ìƒ˜í”Œ)
      const players = [
        { id: 1, name: 'ì²«ì§¸', image: 'ğŸ§’', bgColor: 'bg-pink-400' },
        { id: 2, name: 'ë‘˜ì§¸', image: 'ğŸ‘§', bgColor: 'bg-blue-400' }
      ];

      // ì†ë„ ì„¤ì •
      const speedSettings = {
        slow: { duration: 12, interval: 3000 },
        medium: { duration: 8, interval: 2000 },
        fast: { duration: 5, interval: 1500 }
      };

      // ìƒˆ ë‹¨ì–´ ì‹œì‘
      const startNewWord = () => {
        const randomWord = wordDatabase[Math.floor(Math.random() * wordDatabase.length)];
        setCurrentWord(randomWord);
        setSelectedLetters([]);
        
        const correctLetters = getHangulLetters(randomWord.word);
        const wrongLetters = getRandomWrongLetters(correctLetters, 6);
        const allLetters = [...correctLetters, ...wrongLetters]
          .sort(() => Math.random() - 0.5)
          .map((letter, index) => ({
            id: Math.random(),
            letter,
            isCorrect: correctLetters.includes(letter),
            position: Math.random() * 80 + 10, // 10-90% ìœ„ì¹˜
            delay: Math.random() * 2
          }));
        
        setFallingLetters(allLetters);
        setGameState('playing');
      };

      // ê¸€ì ì„ íƒ ì²˜ë¦¬
      const handleLetterClick = (clickedLetter) => {
        if (gameState !== 'playing') return;

        const correctLetters = getHangulLetters(currentWord.word);
        const nextCorrectLetter = correctLetters[selectedLetters.length];

        if (clickedLetter.letter === nextCorrectLetter) {
          setSelectedLetters([...selectedLetters, clickedLetter.letter]);
          
          // ëª¨ë“  ê¸€ìë¥¼ ë§ì·„ëŠ”ì§€ í™•ì¸
          if (selectedLetters.length + 1 === correctLetters.length) {
            setScore(score + 1);
            setGameState('success');
            setTimeout(() => startNewWord(), 2000);
          }
        } else {
          setGameState('failed');
        }
      };

      // ì¬ì‹œë„
      const handleRetry = () => {
        startNewWord();
      };

      // ê²Œì„ ì‹œì‘
      const handleStartGame = () => {
        setGameState('selectPlayer');
      };

      // í”Œë ˆì´ì–´ ì„ íƒ
      const handleSelectPlayer = (player) => {
        setSelectedPlayer(player);
        setScore(0);
        startNewWord();
      };

      // ì„¤ì •ìœ¼ë¡œ ëŒì•„ê°€ê¸°
      const handleBackToStart = () => {
        setGameState('start');
        setSelectedPlayer(null);
        setScore(0);
      };

      return (
        <div className="w-full h-screen overflow-hidden relative">
          {/* ì‹œì‘ í™”ë©´ */}
          {gameState === 'start' && (
            <div className="flex flex-col items-center justify-center h-full bg-gradient-to-br from-yellow-300 via-pink-300 to-purple-400 p-8">
              <div className="text-center space-y-8 animate-bounce">
                <h1 className="dongle-font text-9xl font-bold text-white drop-shadow-2xl">
                  í•œê¸€ ë°°ìš°ê¸° ğŸ®
                </h1>
                <p className="text-4xl text-white font-bold drop-shadow-lg">
                  ë–¨ì–´ì§€ëŠ” ê¸€ìë¥¼ ë§ì¶°ë³´ì„¸ìš”!
                </p>
              </div>

              <div className="mt-16 space-y-6 w-full max-w-md">
                <div className="bg-white rounded-3xl p-6 shadow-2xl">
                  <p className="text-2xl font-bold text-gray-700 mb-4">ì†ë„ ì„ íƒ:</p>
                  <div className="grid grid-cols-3 gap-4">
                    {['slow', 'medium', 'fast'].map((s) => (
                      <button
                        key={s}
                        onClick={() => setSpeed(s)}
                        className={`py-6 px-4 rounded-2xl text-2xl font-bold transition-all transform hover:scale-105 ${
                          speed === s 
                            ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-xl' 
                            : 'bg-gray-200 text-gray-600'
                        }`}
                      >
                        {s === 'slow' ? 'ğŸ¢ ëŠë¦¼' : s === 'medium' ? 'ğŸ° ë³´í†µ' : 'ğŸš€ ë¹ ë¦„'}
                      </button>
                    ))}
                  </div>
                </div>

                <button
                  onClick={handleStartGame}
                  className="w-full py-8 bg-gradient-to-r from-green-400 to-blue-500 text-white text-4xl font-bold rounded-3xl shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all"
                >
                  ì‹œì‘í•˜ê¸°! ğŸ‰
                </button>
              </div>
            </div>
          )}

          {/* í”Œë ˆì´ì–´ ì„ íƒ í™”ë©´ */}
          {gameState === 'selectPlayer' && (
            <div className="flex flex-col items-center justify-center h-full bg-gradient-to-br from-blue-300 via-purple-300 to-pink-400 p-8">
              <h2 className="dongle-font text-8xl font-bold text-white mb-16 drop-shadow-2xl">
                ëˆ„ê°€ í• ê¹Œìš”? ğŸ®
              </h2>
              <div className="grid grid-cols-2 gap-8 w-full max-w-4xl">
                {players.map((player) => (
                  <button
                    key={player.id}
                    onClick={() => handleSelectPlayer(player)}
                    className={`${player.bgColor} rounded-3xl p-12 shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all`}
                  >
                    <div className="text-9xl mb-6">{player.image}</div>
                    <div className="text-5xl font-bold text-white drop-shadow-lg">
                      {player.name}
                    </div>
                  </button>
                ))}
              </div>
              <button
                onClick={handleBackToStart}
                className="mt-12 px-12 py-6 bg-gray-600 text-white text-3xl font-bold rounded-2xl hover:bg-gray-700 transition-all"
              >
                â† ë’¤ë¡œê°€ê¸°
              </button>
            </div>
          )}

          {/* ê²Œì„ í™”ë©´ */}
          {(gameState === 'playing' || gameState === 'success' || gameState === 'failed') && currentWord && (
            <div className="relative w-full h-full bg-gradient-to-br from-cyan-200 via-blue-200 to-purple-300">
              {/* ìƒë‹¨ ì •ë³´ ë°” */}
              <div className="absolute top-0 left-0 right-0 bg-white bg-opacity-90 shadow-lg p-6 flex justify-between items-center z-20">
                <div className="flex items-center gap-6">
                  <div className={`${selectedPlayer.bgColor} rounded-full p-4 text-5xl`}>
                    {selectedPlayer.image}
                  </div>
                  <div>
                    <p className="text-3xl font-bold text-gray-700">{selectedPlayer.name}</p>
                    <p className="text-2xl text-gray-500">ë§ì¶˜ ê°œìˆ˜: {score}ê°œ ğŸŒŸ</p>
                  </div>
                </div>
                <button
                  onClick={handleBackToStart}
                  className="px-8 py-4 bg-red-500 text-white text-2xl font-bold rounded-2xl hover:bg-red-600 transition-all"
                >
                  ê·¸ë§Œí•˜ê¸°
                </button>
              </div>

              {/* ì œì‹œì–´ ì˜ì—­ */}
              <div className="absolute top-32 left-0 right-0 flex flex-col items-center z-10">
                <div className="bg-white rounded-3xl shadow-2xl p-8 flex items-center gap-8">
                  <div className="text-9xl">{currentWord.emoji}</div>
                  <div>
                    <p className="text-6xl font-bold text-gray-800 dongle-font">{currentWord.word}</p>
                    <div className="flex gap-3 mt-4">
                      {getHangulLetters(currentWord.word).map((letter, index) => (
                        <div
                          key={index}
                          className={`w-16 h-16 rounded-xl flex items-center justify-center text-3xl font-bold ${
                            selectedLetters[index] 
                              ? 'bg-green-400 text-white' 
                              : 'bg-gray-200 text-gray-400'
                          }`}
                        >
                          {selectedLetters[index] || '?'}
                        </div>
                      ))}
                    </div>
                  </div>
                </div>
              </div>

              {/* ê²Œì„ ì˜ì—­ */}
              <div ref={gameAreaRef} className="absolute top-80 left-0 right-0 bottom-0 overflow-hidden">
                {fallingLetters.map((letter) => (
                  <button
                    key={letter.id}
                    onClick={() => handleLetterClick(letter)}
                    className="falling-letter absolute bg-white rounded-2xl shadow-xl text-5xl font-bold w-24 h-24 flex items-center justify-center hover:bg-yellow-100 transition-colors cursor-pointer transform hover:scale-110"
                    style={{
                      left: `${letter.position}%`,
                      animationDuration: `${speedSettings[speed].duration}s`,
                      animationDelay: `${letter.delay}s`,
                      '--fall-distance': '800px'
                    }}
                  >
                    {letter.letter}
                  </button>
                ))}
              </div>

              {/* ì„±ê³µ ì˜¤ë²„ë ˆì´ */}
              {gameState === 'success' && (
                <div className="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-30">
                  <div className="celebrate bg-white rounded-3xl p-16 text-center shadow-2xl">
                    <div className="text-9xl mb-6">ğŸ‰</div>
                    <p className="text-7xl font-bold text-green-500 dongle-font mb-4">ì •ë‹µ!</p>
                    <p className="text-4xl text-gray-600">ì˜í–ˆì–´ìš”, {selectedPlayer.name}! ğŸŒŸ</p>
                  </div>
                </div>
              )}

              {/* ì‹¤íŒ¨ ì˜¤ë²„ë ˆì´ */}
              {gameState === 'failed' && (
                <div className="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-30">
                  <div className="shake bg-white rounded-3xl p-16 text-center shadow-2xl">
                    <div className="text-9xl mb-6">ğŸ˜…</div>
                    <p className="text-7xl font-bold text-orange-500 dongle-font mb-4">ì•„ì‰¬ì›Œìš”!</p>
                    <p className="text-4xl text-gray-600 mb-8">ë‹¤ì‹œ í•´ë³¼ê¹Œìš”?</p>
                    <button
                      onClick={handleRetry}
                      className="px-12 py-6 bg-gradient-to-r from-blue-400 to-purple-500 text-white text-4xl font-bold rounded-2xl shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all"
                    >
                      ë‹¤ì‹œ í•˜ê¸° ğŸ”„
                    </button>
                  </div>
                </div>
              )}
            </div>
          )}
        </div>
      );
    }

    // ë Œë”ë§
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<HangulGame />);
  </script>
</body>
</html>
